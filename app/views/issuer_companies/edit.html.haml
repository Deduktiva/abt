= page_header('Edit Issuer Company')

= form_with(model: @issuer_company, url: issuer_company_path, method: :patch, local: true, class: 'form', multipart: true) do |form|
  - if @issuer_company.errors.any?
    .alert.alert-danger
      %h4= "#{pluralize(@issuer_company.errors.count, "error")} prohibited this issuer company from being saved:"
      %ul
        - @issuer_company.errors.each do |error|
          %li= error.full_message

  .row
    .col-md-6
      .card
        .card-header
          %h5 Company Information
        .card-body
          .mb-3
            = form.label :short_name, class: 'form-label'
            = form.text_field :short_name, class: 'form-control'

          .mb-3
            = form.label :legal_name, class: 'form-label'
            = form.text_field :legal_name, class: 'form-control'

          .mb-3
            = form.label :vat_id, class: 'form-label'
            = form.text_field :vat_id, class: 'form-control'

          .mb-3
            = form.label :currency, class: 'form-label'
            = form.text_field :currency, class: 'form-control'

          .mb-3
            = form.label :address, class: 'form-label'
            = form.text_area :address, rows: 4, class: 'form-control'

    .col-md-6
      .card
        .card-header
          %h5 Banking Information
        .card-body
          .mb-3
            = form.label :bankaccount_bank, class: 'form-label'
            = form.text_field :bankaccount_bank, class: 'form-control'

          .mb-3
            = form.label :bankaccount_bic, class: 'form-label'
            = form.text_field :bankaccount_bic, class: 'form-control'

          .mb-3
            = form.label :bankaccount_number, class: 'form-label'
            = form.text_field :bankaccount_number, class: 'form-control'

  .row.mt-4
    .col-md-6
      .card
        .card-header
          %h5 Document Settings
        .card-body
          .mb-3
            = form.label :document_contact_line1, class: 'form-label'
            = form.text_field :document_contact_line1, class: 'form-control'

          .mb-3
            = form.label :document_contact_line2, class: 'form-label'
            = form.text_field :document_contact_line2, class: 'form-control'

          .mb-3
            = form.label :document_accent_color, class: 'form-label'
            = form.color_field :document_accent_color, class: 'form-control form-control-color'

          .mb-3
            %label.form-label PDF Logo (for invoices)
            = file_field_tag 'issuer_company[pdf_logo_file]', class: 'form-control', accept: '.pdf'
            %small.form-text.text-muted Upload a PDF logo for use in invoice documents
            - if @issuer_company.pdf_logo.present?
              %div.mt-2
                %span.badge.bg-success Current logo uploaded
                - if @issuer_company.pdf_logo_width && @issuer_company.pdf_logo_height
                  %small.text-muted (#{@issuer_company.pdf_logo_width}Ã—#{@issuer_company.pdf_logo_height})

          .row
            .col-md-6
              .mb-3
                = form.label :pdf_logo_width, 'Logo Width', class: 'form-label'
                = form.text_field :pdf_logo_width, class: 'form-control'
            .col-md-6
              .mb-3
                = form.label :pdf_logo_height, 'Logo Height', class: 'form-label'
                = form.text_field :pdf_logo_height, class: 'form-control'

          .mb-3
            %label.form-label PNG Logo (for website/emails)
            = file_field_tag 'issuer_company[png_logo_file]', class: 'form-control', accept: '.png'
            %small.form-text.text-muted Upload a PNG logo for use on website and in emails
            - if @issuer_company.png_logo.present?
              %div.mt-2
                %span.badge.bg-success Current logo uploaded

    .col-md-6
      .card
        .card-header
          %h5 Invoice Footer
        .card-body
          .mb-3
            = form.label :invoice_footer, class: 'form-label'
            = form.text_area :invoice_footer, rows: 6, class: 'form-control'

  = action_buttons_wrapper do
    = form.submit 'Update Issuer Company', class: 'btn btn-primary'
    = action_button 'Show', issuer_company_path, :secondary
    = action_button 'Back', issuer_company_path, :secondary
