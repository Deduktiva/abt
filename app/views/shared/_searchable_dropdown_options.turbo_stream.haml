/ Generic Turbo Stream partial for searchable dropdown options
/ Parameters:
/ - dropdown_id: The ID of the dropdown to update
/ - items: Collection of items to display
/ - item_name: Name of the item type (e.g., 'project', 'customer')
/ - search_placeholder: Placeholder text for search input

= turbo_stream.update dropdown_id do
  .p-2.border-bottom
    %input.form-control.form-control-sm{ type: 'text', placeholder: search_placeholder, data: { searchable_dropdown_target: 'search' } }
  .dropdown-content{ style: 'max-height: 300px; overflow-y: auto;' }
    - if items.empty?
      .dropdown-item.text-muted= "No #{item_name.pluralize} available"
    - else
      - items.each do |item|
        .dropdown-item.searchable-option{
          data: {
            item_id: item.id,
            item_name: (item.respond_to?(:display_name) ? item.display_name : item.name).downcase,
            item_subtext: (item.respond_to?(:matchcode) ? item.matchcode : '').downcase
          }
        }
          .fw-normal= item.respond_to?(:display_name) ? item.display_name : item.name
          .small.text-muted.d-flex.justify-content-between.align-items-center
            %span= item.respond_to?(:matchcode) ? item.matchcode : ''
            - if item.respond_to?(:bill_to_customer_id) && item.bill_to_customer_id.nil?
              %span.text-success{ title: "Reusable #{item_name}" } ♻️
